trigger: none
schedules:
  - cron: "0 0 * * *"
    displayName: Daily midnight build
    branches:
      include:
        - main
pr: none

resources:
  repositories:
    - repository: azure-sdk-tools
      type: github
      endpoint: Azure
      name: Azure/azure-sdk-tools

variables:
  PythonVersion: "3.10"

steps:
  - script: npm install -g @typespec/compiler@next
    displayName: Install @typespec/compiler@next

  - template: build.yml
  - script: npm run check-format
    workingDirectory: $(Build.SourcesDirectory)/packages/rlc-common
    displayName: "Lint check for rlc common lib"
  - script: npm run lint
    workingDirectory: $(Build.SourcesDirectory)/packages/typespec-ts
    displayName: "Lint check for Cadl emitter"
  - script: npm run check-format
    workingDirectory: $(Build.SourcesDirectory)/packages/typespec-ts
    displayName: "Format check for Cadl emitter"
  - script: npm run test
    workingDirectory: $(Build.SourcesDirectory)/packages/typespec-ts
    displayName: "Generate RLC Test Clients from Cadl-ranch"
