/*
 * Copyright (c) Microsoft Corporation.
 * Licensed under the MIT License.
 *
 * Code generated by Microsoft (R) AutoRest Code Generator.
 * Changes may cause incorrect behavior and will be lost if the code is regenerated.
 */

import * as coreHttp from "@azure/core-http";
import * as Mappers from "../models/mappers";
import * as Parameters from "../models/parameters";
import { BatchService } from "../batchService";
import {
  ComputeNodeUser,
  ComputeNodeAddUserOptionalParams,
  ComputeNodeAddUserResponse,
  ComputeNodeDeleteUserOptionalParams,
  ComputeNodeDeleteUserResponse,
  NodeUpdateUserParameter,
  ComputeNodeUpdateUserOptionalParams,
  ComputeNodeUpdateUserResponse,
  ComputeNodeGetOptionalParams,
  ComputeNodeGetResponse,
  ComputeNodeRebootOptionalParams,
  ComputeNodeRebootResponse,
  ComputeNodeReimageOptionalParams,
  ComputeNodeReimageResponse,
  ComputeNodeDisableSchedulingOptionalParams,
  ComputeNodeDisableSchedulingResponse,
  ComputeNodeEnableSchedulingOptionalParams,
  ComputeNodeEnableSchedulingResponse,
  ComputeNodeGetRemoteLoginSettingsOptionalParams,
  ComputeNodeGetRemoteLoginSettingsResponse,
  ComputeNodeGetRemoteDesktopOptionalParams,
  ComputeNodeGetRemoteDesktopResponse,
  UploadBatchServiceLogsConfiguration,
  ComputeNodeUploadBatchServiceLogsOptionalParams,
  ComputeNodeUploadBatchServiceLogsResponse,
  ComputeNodeListOptionalParams,
  ComputeNodeListResponse,
  ComputeNodeListNextOptionalParams,
  ComputeNodeListNextResponse
} from "../models";

/**
 * Class representing a ComputeNode.
 */
export class ComputeNode {
  private readonly client: BatchService;

  /**
   * Initialize a new instance of the class ComputeNode class.
   * @param client Reference to the service client
   */
  constructor(client: BatchService) {
    this.client = client;
  }

  /**
   * You can add a user Account to a Compute Node only when it is in the idle or running state.
   * @param poolId The ID of the Pool that contains the Compute Node.
   * @param user The user Account to be created.
   * @param nodeId The ID of the machine on which you want to create a user Account.
   * @param options The options parameters.
   */
  addUser(
    poolId: string,
    user: ComputeNodeUser,
    nodeId: string,
    options?: ComputeNodeAddUserOptionalParams
  ): Promise<ComputeNodeAddUserResponse> {
    const operationOptions: coreHttp.RequestOptionsBase = coreHttp.operationOptionsToRequestOptionsBase(
      options || {}
    );
    return this.client.sendOperationRequest(
      { poolId, user, nodeId, options: operationOptions },
      addUserOperationSpec
    ) as Promise<ComputeNodeAddUserResponse>;
  }

  /**
   * You can delete a user Account to a Compute Node only when it is in the idle or running state.
   * @param poolId The ID of the Pool that contains the Compute Node.
   * @param nodeId The ID of the machine on which you want to delete a user Account.
   * @param userName The name of the user Account to delete.
   * @param options The options parameters.
   */
  deleteUser(
    poolId: string,
    nodeId: string,
    userName: string,
    options?: ComputeNodeDeleteUserOptionalParams
  ): Promise<ComputeNodeDeleteUserResponse> {
    const operationOptions: coreHttp.RequestOptionsBase = coreHttp.operationOptionsToRequestOptionsBase(
      options || {}
    );
    return this.client.sendOperationRequest(
      { poolId, nodeId, userName, options: operationOptions },
      deleteUserOperationSpec
    ) as Promise<ComputeNodeDeleteUserResponse>;
  }

  /**
   * This operation replaces of all the updatable properties of the Account. For example, if the
   * expiryTime element is not specified, the current value is replaced with the default value, not left
   * unmodified. You can update a user Account on a Compute Node only when it is in the idle or running
   * state.
   * @param poolId The ID of the Pool that contains the Compute Node.
   * @param nodeUpdateUserParameter The parameters for the request.
   * @param nodeId The ID of the machine on which you want to update a user Account.
   * @param userName The name of the user Account to update.
   * @param options The options parameters.
   */
  updateUser(
    poolId: string,
    nodeUpdateUserParameter: NodeUpdateUserParameter,
    nodeId: string,
    userName: string,
    options?: ComputeNodeUpdateUserOptionalParams
  ): Promise<ComputeNodeUpdateUserResponse> {
    const operationOptions: coreHttp.RequestOptionsBase = coreHttp.operationOptionsToRequestOptionsBase(
      options || {}
    );
    return this.client.sendOperationRequest(
      {
        poolId,
        nodeUpdateUserParameter,
        nodeId,
        userName,
        options: operationOptions
      },
      updateUserOperationSpec
    ) as Promise<ComputeNodeUpdateUserResponse>;
  }

  /**
   * Gets information about the specified Compute Node.
   * @param poolId The ID of the Pool that contains the Compute Node.
   * @param nodeId The ID of the Compute Node that you want to get information about.
   * @param options The options parameters.
   */
  get(
    poolId: string,
    nodeId: string,
    options?: ComputeNodeGetOptionalParams
  ): Promise<ComputeNodeGetResponse> {
    const operationOptions: coreHttp.RequestOptionsBase = coreHttp.operationOptionsToRequestOptionsBase(
      options || {}
    );
    return this.client.sendOperationRequest(
      { poolId, nodeId, options: operationOptions },
      getOperationSpec
    ) as Promise<ComputeNodeGetResponse>;
  }

  /**
   * You can restart a Compute Node only if it is in an idle or running state.
   * @param poolId The ID of the Pool that contains the Compute Node.
   * @param nodeId The ID of the Compute Node that you want to restart.
   * @param options The options parameters.
   */
  reboot(
    poolId: string,
    nodeId: string,
    options?: ComputeNodeRebootOptionalParams
  ): Promise<ComputeNodeRebootResponse> {
    const operationOptions: coreHttp.RequestOptionsBase = coreHttp.operationOptionsToRequestOptionsBase(
      options || {}
    );
    return this.client.sendOperationRequest(
      { poolId, nodeId, options: operationOptions },
      rebootOperationSpec
    ) as Promise<ComputeNodeRebootResponse>;
  }

  /**
   * You can reinstall the operating system on a Compute Node only if it is in an idle or running state.
   * This API can be invoked only on Pools created with the cloud service configuration property.
   * @param poolId The ID of the Pool that contains the Compute Node.
   * @param nodeId The ID of the Compute Node that you want to restart.
   * @param options The options parameters.
   */
  reimage(
    poolId: string,
    nodeId: string,
    options?: ComputeNodeReimageOptionalParams
  ): Promise<ComputeNodeReimageResponse> {
    const operationOptions: coreHttp.RequestOptionsBase = coreHttp.operationOptionsToRequestOptionsBase(
      options || {}
    );
    return this.client.sendOperationRequest(
      { poolId, nodeId, options: operationOptions },
      reimageOperationSpec
    ) as Promise<ComputeNodeReimageResponse>;
  }

  /**
   * You can disable Task scheduling on a Compute Node only if its current scheduling state is enabled.
   * @param poolId The ID of the Pool that contains the Compute Node.
   * @param nodeId The ID of the Compute Node on which you want to disable Task scheduling.
   * @param options The options parameters.
   */
  disableScheduling(
    poolId: string,
    nodeId: string,
    options?: ComputeNodeDisableSchedulingOptionalParams
  ): Promise<ComputeNodeDisableSchedulingResponse> {
    const operationOptions: coreHttp.RequestOptionsBase = coreHttp.operationOptionsToRequestOptionsBase(
      options || {}
    );
    return this.client.sendOperationRequest(
      { poolId, nodeId, options: operationOptions },
      disableSchedulingOperationSpec
    ) as Promise<ComputeNodeDisableSchedulingResponse>;
  }

  /**
   * You can enable Task scheduling on a Compute Node only if its current scheduling state is disabled
   * @param poolId The ID of the Pool that contains the Compute Node.
   * @param nodeId The ID of the Compute Node on which you want to enable Task scheduling.
   * @param options The options parameters.
   */
  enableScheduling(
    poolId: string,
    nodeId: string,
    options?: ComputeNodeEnableSchedulingOptionalParams
  ): Promise<ComputeNodeEnableSchedulingResponse> {
    const operationOptions: coreHttp.RequestOptionsBase = coreHttp.operationOptionsToRequestOptionsBase(
      options || {}
    );
    return this.client.sendOperationRequest(
      { poolId, nodeId, options: operationOptions },
      enableSchedulingOperationSpec
    ) as Promise<ComputeNodeEnableSchedulingResponse>;
  }

  /**
   * Before you can remotely login to a Compute Node using the remote login settings, you must create a
   * user Account on the Compute Node. This API can be invoked only on Pools created with the virtual
   * machine configuration property. For Pools created with a cloud service configuration, see the
   * GetRemoteDesktop API.
   * @param poolId The ID of the Pool that contains the Compute Node.
   * @param nodeId The ID of the Compute Node for which to obtain the remote login settings.
   * @param options The options parameters.
   */
  getRemoteLoginSettings(
    poolId: string,
    nodeId: string,
    options?: ComputeNodeGetRemoteLoginSettingsOptionalParams
  ): Promise<ComputeNodeGetRemoteLoginSettingsResponse> {
    const operationOptions: coreHttp.RequestOptionsBase = coreHttp.operationOptionsToRequestOptionsBase(
      options || {}
    );
    return this.client.sendOperationRequest(
      { poolId, nodeId, options: operationOptions },
      getRemoteLoginSettingsOperationSpec
    ) as Promise<ComputeNodeGetRemoteLoginSettingsResponse>;
  }

  /**
   * Before you can access a Compute Node by using the RDP file, you must create a user Account on the
   * Compute Node. This API can only be invoked on Pools created with a cloud service configuration. For
   * Pools created with a virtual machine configuration, see the GetRemoteLoginSettings API.
   * @param poolId The ID of the Pool that contains the Compute Node.
   * @param nodeId The ID of the Compute Node for which you want to get the Remote Desktop Protocol file.
   * @param options The options parameters.
   */
  getRemoteDesktop(
    poolId: string,
    nodeId: string,
    options?: ComputeNodeGetRemoteDesktopOptionalParams
  ): Promise<ComputeNodeGetRemoteDesktopResponse> {
    const operationOptions: coreHttp.RequestOptionsBase = coreHttp.operationOptionsToRequestOptionsBase(
      options || {}
    );
    return this.client.sendOperationRequest(
      { poolId, nodeId, options: operationOptions },
      getRemoteDesktopOperationSpec
    ) as Promise<ComputeNodeGetRemoteDesktopResponse>;
  }

  /**
   * This is for gathering Azure Batch service log files in an automated fashion from Compute Nodes if
   * you are experiencing an error and wish to escalate to Azure support. The Azure Batch service log
   * files should be shared with Azure support to aid in debugging issues with the Batch service.
   * @param poolId The ID of the Pool that contains the Compute Node.
   * @param uploadBatchServiceLogsConfiguration The Azure Batch service log files upload configuration.
   * @param nodeId The ID of the Compute Node from which you want to upload the Azure Batch service log
   *               files.
   * @param options The options parameters.
   */
  uploadBatchServiceLogs(
    poolId: string,
    uploadBatchServiceLogsConfiguration: UploadBatchServiceLogsConfiguration,
    nodeId: string,
    options?: ComputeNodeUploadBatchServiceLogsOptionalParams
  ): Promise<ComputeNodeUploadBatchServiceLogsResponse> {
    const operationOptions: coreHttp.RequestOptionsBase = coreHttp.operationOptionsToRequestOptionsBase(
      options || {}
    );
    return this.client.sendOperationRequest(
      {
        poolId,
        uploadBatchServiceLogsConfiguration,
        nodeId,
        options: operationOptions
      },
      uploadBatchServiceLogsOperationSpec
    ) as Promise<ComputeNodeUploadBatchServiceLogsResponse>;
  }

  /**
   * Lists the Compute Nodes in the specified Pool.
   * @param poolId The ID of the Pool from which you want to list Compute Nodes.
   * @param options The options parameters.
   */
  list(
    poolId: string,
    options?: ComputeNodeListOptionalParams
  ): Promise<ComputeNodeListResponse> {
    const operationOptions: coreHttp.RequestOptionsBase = coreHttp.operationOptionsToRequestOptionsBase(
      options || {}
    );
    return this.client.sendOperationRequest(
      { poolId, options: operationOptions },
      listOperationSpec
    ) as Promise<ComputeNodeListResponse>;
  }

  /**
   * ListNext
   * @param nextLink The nextLink from the previous successful call to the List method.
   * @param poolId The ID of the Pool from which you want to list Compute Nodes.
   * @param options The options parameters.
   */
  listNext(
    nextLink: string,
    poolId: string,
    options?: ComputeNodeListNextOptionalParams
  ): Promise<ComputeNodeListNextResponse> {
    const operationOptions: coreHttp.RequestOptionsBase = coreHttp.operationOptionsToRequestOptionsBase(
      options || {}
    );
    return this.client.sendOperationRequest(
      { nextLink, poolId, options: operationOptions },
      listNextOperationSpec
    ) as Promise<ComputeNodeListNextResponse>;
  }
}
// Operation Specifications

const serializer = new coreHttp.Serializer(Mappers, /* isXml */ false);

const addUserOperationSpec: coreHttp.OperationSpec = {
  path: "/pools/{poolId}/nodes/{nodeId}/users",
  httpMethod: "POST",
  responses: {
    201: {
      headersMapper: Mappers.ComputeNodeAddUserHeaders
    },
    default: {
      bodyMapper: Mappers.BatchError
    }
  },
  requestBody: Parameters.user,
  queryParameters: [Parameters.apiVersion, Parameters.timeout64],
  urlParameters: [Parameters.batchUrl, Parameters.poolId10, Parameters.nodeId3],
  headerParameters: [
    Parameters.contentType,
    Parameters.clientRequestId64,
    Parameters.returnClientRequestId64,
    Parameters.ocpDate64
  ],
  serializer
};
const deleteUserOperationSpec: coreHttp.OperationSpec = {
  path: "/pools/{poolId}/nodes/{nodeId}/users/{userName}",
  httpMethod: "DELETE",
  responses: {
    200: {
      headersMapper: Mappers.ComputeNodeDeleteUserHeaders
    },
    default: {
      bodyMapper: Mappers.BatchError
    }
  },
  queryParameters: [Parameters.apiVersion, Parameters.timeout65],
  urlParameters: [
    Parameters.batchUrl,
    Parameters.poolId9,
    Parameters.nodeId4,
    Parameters.userName
  ],
  headerParameters: [
    Parameters.clientRequestId65,
    Parameters.returnClientRequestId65,
    Parameters.ocpDate65
  ],
  serializer
};
const updateUserOperationSpec: coreHttp.OperationSpec = {
  path: "/pools/{poolId}/nodes/{nodeId}/users/{userName}",
  httpMethod: "PUT",
  responses: {
    200: {
      headersMapper: Mappers.ComputeNodeUpdateUserHeaders
    },
    default: {
      bodyMapper: Mappers.BatchError
    }
  },
  requestBody: Parameters.nodeUpdateUserParameter,
  queryParameters: [Parameters.apiVersion, Parameters.timeout66],
  urlParameters: [
    Parameters.batchUrl,
    Parameters.poolId10,
    Parameters.nodeId5,
    Parameters.userName1
  ],
  headerParameters: [
    Parameters.contentType,
    Parameters.clientRequestId66,
    Parameters.returnClientRequestId66,
    Parameters.ocpDate66
  ],
  serializer
};
const getOperationSpec: coreHttp.OperationSpec = {
  path: "/pools/{poolId}/nodes/{nodeId}",
  httpMethod: "GET",
  responses: {
    200: {
      bodyMapper: Mappers.ComputeNode,
      headersMapper: Mappers.ComputeNodeGetHeaders
    },
    default: {
      bodyMapper: Mappers.BatchError
    }
  },
  queryParameters: [
    Parameters.apiVersion,
    Parameters.select13,
    Parameters.timeout67
  ],
  urlParameters: [Parameters.batchUrl, Parameters.poolId10, Parameters.nodeId6],
  headerParameters: [
    Parameters.clientRequestId67,
    Parameters.returnClientRequestId67,
    Parameters.ocpDate67
  ],
  serializer
};
const rebootOperationSpec: coreHttp.OperationSpec = {
  path: "/pools/{poolId}/nodes/{nodeId}/reboot",
  httpMethod: "POST",
  responses: {
    202: {
      headersMapper: Mappers.ComputeNodeRebootHeaders
    },
    default: {
      bodyMapper: Mappers.BatchError
    }
  },
  requestBody: Parameters.nodeRebootParameter,
  queryParameters: [Parameters.apiVersion, Parameters.timeout68],
  urlParameters: [Parameters.batchUrl, Parameters.poolId10, Parameters.nodeId7],
  headerParameters: [
    Parameters.contentType,
    Parameters.clientRequestId68,
    Parameters.returnClientRequestId68,
    Parameters.ocpDate68
  ],
  serializer
};
const reimageOperationSpec: coreHttp.OperationSpec = {
  path: "/pools/{poolId}/nodes/{nodeId}/reimage",
  httpMethod: "POST",
  responses: {
    202: {
      headersMapper: Mappers.ComputeNodeReimageHeaders
    },
    default: {
      bodyMapper: Mappers.BatchError
    }
  },
  requestBody: Parameters.nodeReimageParameter,
  queryParameters: [Parameters.apiVersion, Parameters.timeout69],
  urlParameters: [Parameters.batchUrl, Parameters.poolId10, Parameters.nodeId7],
  headerParameters: [
    Parameters.contentType,
    Parameters.clientRequestId69,
    Parameters.returnClientRequestId69,
    Parameters.ocpDate69
  ],
  serializer
};
const disableSchedulingOperationSpec: coreHttp.OperationSpec = {
  path: "/pools/{poolId}/nodes/{nodeId}/disablescheduling",
  httpMethod: "POST",
  responses: {
    200: {
      headersMapper: Mappers.ComputeNodeDisableSchedulingHeaders
    },
    default: {
      bodyMapper: Mappers.BatchError
    }
  },
  requestBody: Parameters.nodeDisableSchedulingParameter,
  queryParameters: [Parameters.apiVersion, Parameters.timeout70],
  urlParameters: [Parameters.batchUrl, Parameters.poolId10, Parameters.nodeId8],
  headerParameters: [
    Parameters.contentType,
    Parameters.clientRequestId70,
    Parameters.returnClientRequestId70,
    Parameters.ocpDate70
  ],
  serializer
};
const enableSchedulingOperationSpec: coreHttp.OperationSpec = {
  path: "/pools/{poolId}/nodes/{nodeId}/enablescheduling",
  httpMethod: "POST",
  responses: {
    200: {
      headersMapper: Mappers.ComputeNodeEnableSchedulingHeaders
    },
    default: {
      bodyMapper: Mappers.BatchError
    }
  },
  queryParameters: [Parameters.apiVersion, Parameters.timeout71],
  urlParameters: [Parameters.batchUrl, Parameters.poolId10, Parameters.nodeId9],
  headerParameters: [
    Parameters.clientRequestId71,
    Parameters.returnClientRequestId71,
    Parameters.ocpDate71
  ],
  serializer
};
const getRemoteLoginSettingsOperationSpec: coreHttp.OperationSpec = {
  path: "/pools/{poolId}/nodes/{nodeId}/remoteloginsettings",
  httpMethod: "GET",
  responses: {
    200: {
      bodyMapper: Mappers.ComputeNodeGetRemoteLoginSettingsResult,
      headersMapper: Mappers.ComputeNodeGetRemoteLoginSettingsHeaders
    },
    default: {
      bodyMapper: Mappers.BatchError
    }
  },
  queryParameters: [Parameters.apiVersion, Parameters.timeout72],
  urlParameters: [
    Parameters.batchUrl,
    Parameters.poolId10,
    Parameters.nodeId10
  ],
  headerParameters: [
    Parameters.clientRequestId72,
    Parameters.returnClientRequestId72,
    Parameters.ocpDate72
  ],
  serializer
};
const getRemoteDesktopOperationSpec: coreHttp.OperationSpec = {
  path: "/pools/{poolId}/nodes/{nodeId}/rdp",
  httpMethod: "GET",
  responses: {
    200: {
      headersMapper: Mappers.ComputeNodeGetRemoteDesktopHeaders
    },
    default: {
      bodyMapper: Mappers.BatchError
    }
  },
  queryParameters: [Parameters.apiVersion, Parameters.timeout73],
  urlParameters: [
    Parameters.batchUrl,
    Parameters.poolId10,
    Parameters.nodeId11
  ],
  headerParameters: [
    Parameters.clientRequestId73,
    Parameters.returnClientRequestId73,
    Parameters.ocpDate73
  ],
  serializer
};
const uploadBatchServiceLogsOperationSpec: coreHttp.OperationSpec = {
  path: "/pools/{poolId}/nodes/{nodeId}/uploadbatchservicelogs",
  httpMethod: "POST",
  responses: {
    200: {
      bodyMapper: Mappers.UploadBatchServiceLogsResult,
      headersMapper: Mappers.ComputeNodeUploadBatchServiceLogsHeaders
    },
    default: {
      bodyMapper: Mappers.BatchError
    }
  },
  requestBody: Parameters.uploadBatchServiceLogsConfiguration,
  queryParameters: [Parameters.apiVersion, Parameters.timeout74],
  urlParameters: [
    Parameters.batchUrl,
    Parameters.poolId10,
    Parameters.nodeId12
  ],
  headerParameters: [
    Parameters.contentType,
    Parameters.clientRequestId74,
    Parameters.returnClientRequestId74,
    Parameters.ocpDate74
  ],
  serializer
};
const listOperationSpec: coreHttp.OperationSpec = {
  path: "/pools/{poolId}/nodes",
  httpMethod: "GET",
  responses: {
    200: {
      bodyMapper: Mappers.ComputeNodeListResult,
      headersMapper: Mappers.ComputeNodeListHeaders
    },
    default: {
      bodyMapper: Mappers.BatchError
    }
  },
  queryParameters: [
    Parameters.apiVersion,
    Parameters.filter12,
    Parameters.select14,
    Parameters.maxResults13,
    Parameters.timeout75
  ],
  urlParameters: [Parameters.batchUrl, Parameters.poolId11],
  headerParameters: [
    Parameters.clientRequestId75,
    Parameters.returnClientRequestId75,
    Parameters.ocpDate75
  ],
  serializer
};
const listNextOperationSpec: coreHttp.OperationSpec = {
  path: "{nextLink}",
  httpMethod: "GET",
  responses: {
    200: {
      bodyMapper: Mappers.ComputeNodeListResult,
      headersMapper: Mappers.ComputeNodeListNextHeaders
    },
    default: {
      bodyMapper: Mappers.BatchError
    }
  },
  queryParameters: [
    Parameters.apiVersion,
    Parameters.filter12,
    Parameters.select14,
    Parameters.maxResults13,
    Parameters.timeout75
  ],
  urlParameters: [
    Parameters.batchUrl,
    Parameters.nextLink,
    Parameters.poolId11
  ],
  headerParameters: [
    Parameters.clientRequestId75,
    Parameters.returnClientRequestId75,
    Parameters.ocpDate75
  ],
  serializer
};
